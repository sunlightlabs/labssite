{% extends "base.html" %}
{% load labs %}
{% load markup %}

{% block sidebar %}
    {{ block.super }}
    {% recent_tweets 2 %}
{% endblock %}

{% block content %}
	{% if featured_projects %}
		<div id="featuredProjects">
			<div id="featuredHeader">
				<h2>Featured Projects</h2>
			</div>
			<ul>
				{% for project in featured_projects %}
				<li>
					<h3><a href="{{ project.url }}">{{ project.name }}</a></h3>
					<p>{{ project.description|markdown }}</p>
				</li>
				{% endfor %}
			</ul>	
		</div>
	{% endif %}
	<div id="blog">
		<h2>Recent Posts</h2>
		<div class="entry">
			<ol class="entries hfeed">
			    {% for post in recent_posts %}
				    <li class="hentry">
    					<div class="entryMetadata">
    						<h3 class="entry_title"><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h3>
    						<div class="commentsMetaData">
    							<span class="type">Comments:</span>
    							<span class="value">
    								<a href="{{ post.get_absolute_url }}#comments">{{ post.comment_count }}</a>
    							</span>
    						</div>
							<div class="hr"><hr /></div>
    						<div class="authorMetaData vcard">
    							<span class="type">Written by </span>
    							<span class="value fnn">{{ post.author.first_name }}</span>
    						</div>
    						<div class="updatedMetaData">
    							<span class="type">Date:</span>
    							<span class="value">{{ post.date_published|date:"F j Y" }}</span>
    						</div>
    					</div>
    					{% ifequal post.markup 'markdown' %}
                            <p>{{ post.excerpt|markdown|safe }}</p>
                        {% else %}
                            {% ifequal post.markup 'textile' %}
                                <p>{{ post.excerpt|textile|safe }}</p>
                            {% else %}                
                                {% ifequal post.markup 'restructuredtext' %}
                                    <p>{{ post.excerpt|restructuredtext|safe }}</p>
                                {% else %}
                                    <p>{{ post.excerpt|safe }}</p>
                                {% endifequal %}
                            {% endifequal %}
                        {% endifequal %}
    					<div class="readMore"><a href="{{ post.get_absolute_url }}">Read More</a></div>
    				</li>
				{% endfor %}
			</ol>	
		</div>
	</div>
{% endblock %}